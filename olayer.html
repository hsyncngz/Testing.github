<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Medya Oynatıcı</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      height: 100%;
      overflow: hidden;
    }
    video, audio {
      width: 100vw;
      height: 100vh;
      background: black;
    }
    #playButton {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px;
      font-size: 1.2rem;
      background: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button id="playButton">Tam Ekran Başlat</button>
  <video id="media" controls style="display:none;"></video>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const src = urlParams.get('src');
    const media = document.getElementById('media');
    const playButton = document.getElementById('playButton');

    function isAudio(url) {
      return url.endsWith('.mp3') || url.endsWith('.m3u');
    }

    function isHLS(url) {
      return url.endsWith('.m3u8') || url.endsWith('.ts');
    }

    playButton.onclick = () => {
      playButton.style.display = 'none';
      media.style.display = 'block';

      if (!src) {
        alert("Medya URL'si belirtilmedi.");
        return;
      }

      if (isAudio(src)) {
        const audio = document.createElement('audio');
        audio.src = src;
        audio.controls = true;
        audio.autoplay = true;
        audio.style.width = '100vw';
        audio.style.height = '100vh';
        document.body.innerHTML = '';
        document.body.appendChild(audio);
        audio.requestFullscreen?.();
      } else if (isHLS(src) && Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(src);
        hls.attachMedia(media);
        media.play();
        media.requestFullscreen?.();
      } else {
        media.src = src;
        media.play();
        media.requestFullscreen?.();
      }
    };
  </script>
</body>
</html>
